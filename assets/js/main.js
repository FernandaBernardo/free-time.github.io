!function(t,e){"function"==typeof define&&define.amd?define(function(){return e(t)}):"object"==typeof exports?module.exports=e:t.echo=e(t)}(this,function(t){"use strict";var e,n,r,o,i,u={},a=function(){},c=function(t){return null===t.offsetParent},l=function(t,e){if(c(t))return!1;var n=t.getBoundingClientRect();return n.right>=e.l&&n.bottom>=e.t&&n.left<=e.r&&n.top<=e.b},s=function(){(o||!n)&&(clearTimeout(n),n=setTimeout(function(){u.render(),n=null},r))};return u.init=function(n){n=n||{};var c=n.offset||0,l=n.offsetVertical||c,f=n.offsetHorizontal||c,d=function(t,e){return parseInt(t||e,10)};e={t:d(n.offsetTop,l),b:d(n.offsetBottom,l),l:d(n.offsetLeft,f),r:d(n.offsetRight,f)},r=d(n.throttle,250),o=n.debounce!==!1,i=!!n.unload,a=n.callback||a,u.render(),document.addEventListener?(t.addEventListener("scroll",s,!1),t.addEventListener("load",s,!1)):(t.attachEvent("onscroll",s),t.attachEvent("onload",s))},u.render=function(){for(var n,r,o=document.querySelectorAll("img[data-echo], [data-echo-background]"),c=o.length,s={l:0-e.l,t:0-e.t,b:(t.innerHeight||document.documentElement.clientHeight)+e.b,r:(t.innerWidth||document.documentElement.clientWidth)+e.r},f=0;c>f;f++)r=o[f],l(r,s)?(i&&r.setAttribute("data-echo-placeholder",r.src),null!==r.getAttribute("data-echo-background")?r.style.backgroundImage="url("+r.getAttribute("data-echo-background")+")":r.src=r.getAttribute("data-echo"),i||(r.removeAttribute("data-echo"),r.removeAttribute("data-echo-background")),a(r,"load")):i&&(n=r.getAttribute("data-echo-placeholder"))&&(null!==r.getAttribute("data-echo-background")?r.style.backgroundImage="url("+n+")":r.src=n,r.removeAttribute("data-echo-placeholder"),a(r,"unload"));c||u.detach()},u.detach=function(){document.removeEventListener?t.removeEventListener("scroll",s):t.detachEvent("onscroll",s),clearTimeout(n)},u}),!function t(e,n,r){function o(u,a){if(!n[u]){if(!e[u]){var c="function"==typeof require&&require;if(!a&&c)return c(u,!0);if(i)return i(u,!0);throw new Error("Cannot find module '"+u+"'")}var l=n[u]={exports:{}};e[u][0].call(l.exports,function(t){var n=e[u][1][t];return o(n?n:t)},l,l.exports,t,e,n,r)}return n[u].exports}for(var i="function"==typeof require&&require,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(t,e,n){"use strict";function r(t,e){var n;n=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),n.open("GET",t,!0),n.onreadystatechange=function(){if(200===n.status&&4===n.readyState)try{e(null,JSON.parse(n.responseText))}catch(t){e(t,null)}},n.send()}e.exports={load:r}},{}],2:[function(t,e,n){"use strict";e.exports=function r(t){function e(t){return t?void 0!==t.required&&t.required instanceof Array:!1}if(!e(t))throw new Error("-- OptionsValidator: required options missing");if(!(this instanceof r))return new r(t);var n=t.required;this.getRequiredOptions=function(){return n},this.validate=function(t){var e=[];return n.forEach(function(n){void 0===t[n]&&e.push(n)}),e}}},{}],3:[function(t,e,n){"use strict";function r(t){return u(t)?c(t):a(t)?l(t):void 0}function o(){return v.length=0,v}function i(){return v}function u(t){return!!t&&"[object Object]"===Object.prototype.toString.call(t)}function a(t){return!!t&&"[object Array]"===Object.prototype.toString.call(t)}function c(t){return v.push(t),v}function l(t){for(var e=[],n=0;n<t.length;n++)u(t[n])&&e.push(c(t[n]));return e}function s(t){return t?d(v,t,y.searchStrategy,y):[]}function f(t){y=t||{},y.fuzzy=t.fuzzy||!1,y.limit=t.limit||10,y.searchStrategy=t.fuzzy?m:g}function d(t,e,n,r){for(var o=[],i=0;i<t.length&&o.length<r.limit;i++){var u=p(t[i],e,n,r);u&&o.push(u)}return o}function p(t,e,n,r){for(var o in t)if(!h(t[o],r.exclude)&&n.matches(t[o],e))return t}function h(t,e){var n=!1;e=e||[];for(var r=0;r<e.length;r++){var o=e[r];!n&&new RegExp(t).test(o)&&(n=!0)}return n}e.exports={put:r,clear:o,get:i,search:s,setOptions:f};var m=t("./SearchStrategies/FuzzySearchStrategy"),g=t("./SearchStrategies/LiteralSearchStrategy"),v=[],y={};y.fuzzy=!1,y.limit=10,y.searchStrategy=y.fuzzy?m:g},{"./SearchStrategies/FuzzySearchStrategy":4,"./SearchStrategies/LiteralSearchStrategy":5}],4:[function(t,e,n){"use strict";function r(){function t(t){return new RegExp(t.split("").join(".*?"),"gi")}this.matches=function(e,n){return"string"!=typeof e?!1:(e=e.trim(),!!t(n).test(e))}}e.exports=new r},{}],5:[function(t,e,n){"use strict";function r(){function t(t,e){return t.toLowerCase().indexOf(e.toLowerCase())>=0}this.matches=function(e,n){return"string"!=typeof e?!1:(e=e.trim(),t(e,n))}}e.exports=new r},{}],6:[function(t,e,n){"use strict";function r(t){i.pattern=t.pattern||i.pattern,i.template=t.template||i.template,"function"==typeof t.middleware&&(i.middleware=t.middleware)}function o(t){return i.template.replace(i.pattern,function(e,n){var r=i.middleware(n,t[n],i.template);return void 0!==r?r:t[n]||e})}e.exports={compile:o,setOptions:r};var i={};i.pattern=/\{(.*?)\}/g,i.template="",i.middleware=function(){}},{}],7:[function(t,e,n){!function(e,n,r){"use strict";function o(t){h.put(t),c()}function i(t){m.load(t,function(e,n){e&&s("failed to get JSON ("+t+")"),o(n)})}function u(){f.resultsContainer.innerHTML=""}function a(t){f.resultsContainer.innerHTML+=t}function c(){f.searchInput.addEventListener("keyup",function(t){u(),t.target.value.length>0&&l(h.search(t.target.value))})}function l(t){if(0===t.length)return a(f.noResultsText);for(var e=0;e<t.length;e++)a(p.compile(t[e]))}function s(t){throw new Error("SimpleJekyllSearch --- "+t)}var f={searchInput:null,resultsContainer:null,json:[],searchResultTemplate:'<a href="{post.link}"><h2 class="lecture-title-search">{title}</h2></a>',templateMiddleware:function(){},noResultsText:"<h2>Não foi possível encontrar :(</h2>",limit:10,fuzzy:!1,exclude:[]},d=["searchInput","resultsContainer","json"],p=t("./Templater"),h=t("./Repository"),m=t("./JSONLoader"),g=t("./OptionsValidator")({required:d}),v=t("./utils");e.SimpleJekyllSearch=function(t){var e=g.validate(t);e.length>0&&s("You must specify the following required options: "+d),f=v.merge(f,t),p.setOptions({template:f.searchResultTemplate,middleware:f.templateMiddleware}),h.setOptions({fuzzy:f.fuzzy,limit:f.limit}),v.isJSON(f.json)?o(f.json):i(f.json)},e.SimpleJekyllSearch.init=e.SimpleJekyllSearch}(window,document)},{"./JSONLoader":1,"./OptionsValidator":2,"./Repository":3,"./Templater":6,"./utils":8}],8:[function(t,e,n){"use strict";function r(t,e){var n={};for(var r in t)n[r]=t[r],void 0!==e[r]&&(n[r]=e[r]);return n}function o(t){try{return t instanceof Object&&JSON.parse(JSON.stringify(t))?!0:!1}catch(e){return!1}}e.exports={merge:r,isJSON:o}},{}]},{},[7]);