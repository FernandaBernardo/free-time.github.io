!function(t,e){"function"==typeof define&&define.amd?define(function(){return e(t)}):"object"==typeof exports?module.exports=e:t.echo=e(t)}(this,function(t){"use strict";var e,n,i,r,a,o={},s=function(){},u=function(t){return null===t.offsetParent},c=function(t,e){if(u(t))return!1;var n=t.getBoundingClientRect();return n.right>=e.l&&n.bottom>=e.t&&n.left<=e.r&&n.top<=e.b},l=function(){(r||!n)&&(clearTimeout(n),n=setTimeout(function(){o.render(),n=null},i))};return o.init=function(n){n=n||{};var u=n.offset||0,c=n.offsetVertical||u,h=n.offsetHorizontal||u,d=function(t,e){return parseInt(t||e,10)};e={t:d(n.offsetTop,c),b:d(n.offsetBottom,c),l:d(n.offsetLeft,h),r:d(n.offsetRight,h)},i=d(n.throttle,250),r=n.debounce!==!1,a=!!n.unload,s=n.callback||s,o.render(),document.addEventListener?(t.addEventListener("scroll",l,!1),t.addEventListener("load",l,!1)):(t.attachEvent("onscroll",l),t.attachEvent("onload",l))},o.render=function(){for(var n,i,r=document.querySelectorAll("img[data-echo], [data-echo-background]"),u=r.length,l={l:0-e.l,t:0-e.t,b:(t.innerHeight||document.documentElement.clientHeight)+e.b,r:(t.innerWidth||document.documentElement.clientWidth)+e.r},h=0;u>h;h++)i=r[h],c(i,l)?(a&&i.setAttribute("data-echo-placeholder",i.src),null!==i.getAttribute("data-echo-background")?i.style.backgroundImage="url("+i.getAttribute("data-echo-background")+")":i.src=i.getAttribute("data-echo"),a||(i.removeAttribute("data-echo"),i.removeAttribute("data-echo-background")),s(i,"load")):a&&(n=i.getAttribute("data-echo-placeholder"))&&(null!==i.getAttribute("data-echo-background")?i.style.backgroundImage="url("+n+")":i.src=n,i.removeAttribute("data-echo-placeholder"),s(i,"unload"));u||o.detach()},o.detach=function(){document.removeEventListener?t.removeEventListener("scroll",l):t.detachEvent("onscroll",l),clearTimeout(n)},o});var inphinity=function(){return this.loading=!1,this.debug=!1,this.url="",this.currentPage=1,this.itemSelector="div.post",this.nextSelector="div.navigation a:first",this.navSelector="div.navigation",this.basePath=!1,this.path=!1,this.dataType="html",this.bag=!1,this.bagClassName=!1,this.loader=!1,this.trustedRequest=!1,this.defaults={finishedMsg:"<em>That's all folks!</em>",animationSpeed:500},this.scroller=function(t){if(this.loading!==!0){var e=this.element.offsetTop+this.element.offsetHeight,n=e-t;750>=n&&(this.loading=!0,this.request())}},this.getPath=function(){var t=this.basePath;if(t.match(/^(.*?)\b2\b(.*?$)/))t=t.match(/^(.*?)\b2\b(.*?$)/).slice(1);else if(t.match(/^(.*?)2(.*?$)/)){if(t.match(/^(.*?page=)2(\/.*|$)/))return t=t.match(/^(.*?page=)2(\/.*|$)/).slice(1);t=t.match(/^(.*?)2(.*?$)/).slice(1)}else{if(t.match(/^(.*?page=)1(\/.*|$)/))return t=t.match(/^(.*?page=)1(\/.*|$)/).slice(1);this.currentPage=t.match(/\d+/)[0]-1,t=[this.path,""]}return t},this.getUrlPath=function(){var t=document.querySelector(this.nextSelector).href.split("/");return t[t.length-1]},this.createBag=function(){var t=document.createElement("div");t.style.display="none",this.bagClassName=this.bagClassName||"ph-bag",t.className=this.bagClassName,this.element.appendChild(t),this.bag=document.querySelector("."+this.bagClassName)},this.createLoader=function(){var t=document.createElement("div");t.style.display="none",t.className="ph-loader",this.element.appendChild(t),this.loader=document.querySelector(".ph-loader")},this.updateLoader=function(){this.element.removeChild(this.loader),this.createLoader()},this.loaderToggle=function(t,e){this.loader.style.display="block",t===!0?this.animation().fadeIn(this.loader,e):t===!1&&this.animation().fadeOut(this.loader,e)},this.request=function(){var t=this,e=t.path+""+(t.currentPage+1),n=new XMLHttpRequest;window.location.pathname.indexOf(t.path)>-1&&(e="../"+e),t.loaderToggle(!0),n.open("GET",encodeURI(e)),n.onload=function(){if(200===n.status||t.trustedRequest){var e=/<body[^>]*>((.|[\n\r])*)<\/body>/im.exec(n.responseText).slice(1)[0];t.trustedRequest=!0,t.loaderToggle(!1,t.render.bind(t,e))}else t._debug("Request failed. Returned status of "+n.status)},n.send()},this.render=function(t,e){var n=this;n.bag.innerHTML=t;var i=n.bag.querySelectorAll(n.itemSelector);if(!i.length)return n.finished();if(e!==!0){var r=document.querySelector(n.navSelector);return n.animation().fadeOut(r,function(){return n.render(t,!0)})}for(var a=0;a<i.length;a++)n.element.appendChild(i[a]);n.toNext()},this.toNext=function(){this.updateLoader(),this.currentPage=this.currentPage+1,this.loading=!1},this.finished=function(){var t=document.createElement("div");t.className="ph-end",t.innerHTML=this.defaults.finishedMsg,this.element.appendChild(t)},this.on=function(t){return this.sel=t,this.element=document.querySelector(t),this},this.set=function(t){t.navSelector&&(this.navSelector=t.navSelector),t.nextSelector&&(this.nextSelector=t.nextSelector),t.itemSelector&&(this.itemSelector=t.itemSelector),t.path&&(this.path=t.path),t.basePath&&(this.basePath=t.basePath),t.finishedMsg&&(this.defaults.finishedMsg=t.finishedMsg),t.animationSpeed&&(this.defaults.animationSpeed=t.animationSpeed,"slow"===t.animationSpeed&&(this.defaults.animationSpeed=800),"normal"===t.animationSpeed&&(this.defaults.animationSpeed=500),"fast"===t.animationSpeed&&(this.defaults.animationSpeed=300)),this.init()},this.init=function(){this.basePath=this.basePath||this.getUrlPath(),this.path=this.path||this.getPath()[0]||"page",this.createLoader(),this.createBag(),this.setEventScroll()},this.setEventScroll=function(){var t=this;window.addEventListener("scroll",function(e){t.scroller(window.scrollY||e.target.activeElement.scrollTop)})},this._debug=function(t){console.log("Inphinity: ",t)},this.animation=function(){var t=this;return{fadeOut:function(e,n){e.style.opacity=1;var i=+new Date,r=function(){if(e.style.opacity=+e.style.opacity-(new Date-i)/t.defaults.animationSpeed,i=+new Date,+e.style.opacity>0)window.requestAnimationFrame&&requestAnimationFrame(r)||setTimeout(r,16);else{if(e.style.display="none","undefined"==typeof n)return!0;n()}};r()},fadeIn:function(e,n){e.style.opacity=0;var i=+new Date,r=function(){if(e.style.opacity=+e.style.opacity+(new Date-i)/t.defaults.animationSpeed,i=+new Date,+e.style.opacity<1)window.requestAnimationFrame&&requestAnimationFrame(r)||setTimeout(r,16);else{if("undefined"==typeof n)return!0;n()}};r()}}},this.on.bind(this)}();!function t(e,n,i){function r(o,s){if(!n[o]){if(!e[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(a)return a(o,!0);throw new Error("Cannot find module '"+o+"'")}var c=n[o]={exports:{}};e[o][0].call(c.exports,function(t){var n=e[o][1][t];return r(n?n:t)},c,c.exports,t,e,n,i)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(t,e,n){"use strict";function i(t,e){var n;n=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),n.open("GET",t,!0),n.onreadystatechange=function(){if(200===n.status&&4===n.readyState)try{e(null,JSON.parse(n.responseText))}catch(t){e(t,null)}},n.send()}e.exports={load:i}},{}],2:[function(t,e,n){"use strict";e.exports=function i(t){function e(t){return t?void 0!==t.required&&t.required instanceof Array:!1}if(!e(t))throw new Error("-- OptionsValidator: required options missing");if(!(this instanceof i))return new i(t);var n=t.required;this.getRequiredOptions=function(){return n},this.validate=function(t){var e=[];return n.forEach(function(n){void 0===t[n]&&e.push(n)}),e}}},{}],3:[function(t,e,n){"use strict";function i(t){return o(t)?u(t):s(t)?c(t):void 0}function r(){return v.length=0,v}function a(){return v}function o(t){return!!t&&"[object Object]"===Object.prototype.toString.call(t)}function s(t){return!!t&&"[object Array]"===Object.prototype.toString.call(t)}function u(t){return v.push(t),v}function c(t){for(var e=[],n=0;n<t.length;n++)o(t[n])&&e.push(u(t[n]));return e}function l(t){return t?d(v,t,y.searchStrategy,y):[]}function h(t){y=t||{},y.fuzzy=t.fuzzy||!1,y.limit=t.limit||10,y.searchStrategy=t.fuzzy?m:g}function d(t,e,n,i){for(var r=[],a=0;a<t.length&&r.length<i.limit;a++){var o=f(t[a],e,n,i);o&&r.push(o)}return r}function f(t,e,n,i){for(var r in t)if(!p(t[r],i.exclude)&&n.matches(t[r],e))return t}function p(t,e){var n=!1;e=e||[];for(var i=0;i<e.length;i++){var r=e[i];!n&&new RegExp(t).test(r)&&(n=!0)}return n}e.exports={put:i,clear:r,get:a,search:l,setOptions:h};var m=t("./SearchStrategies/FuzzySearchStrategy"),g=t("./SearchStrategies/LiteralSearchStrategy"),v=[],y={};y.fuzzy=!1,y.limit=10,y.searchStrategy=y.fuzzy?m:g},{"./SearchStrategies/FuzzySearchStrategy":4,"./SearchStrategies/LiteralSearchStrategy":5}],4:[function(t,e,n){"use strict";function i(){function t(t){return new RegExp(t.split("").join(".*?"),"gi")}this.matches=function(e,n){return"string"!=typeof e?!1:(e=e.trim(),!!t(n).test(e))}}e.exports=new i},{}],5:[function(t,e,n){"use strict";function i(){function t(t,e){return t.toLowerCase().indexOf(e.toLowerCase())>=0}this.matches=function(e,n){return"string"!=typeof e?!1:(e=e.trim(),t(e,n))}}e.exports=new i},{}],6:[function(t,e,n){"use strict";function i(t){a.pattern=t.pattern||a.pattern,a.template=t.template||a.template,"function"==typeof t.middleware&&(a.middleware=t.middleware)}function r(t){return a.template.replace(a.pattern,function(e,n){var i=a.middleware(n,t[n],a.template);return void 0!==i?i:t[n]||e})}e.exports={compile:r,setOptions:i};var a={};a.pattern=/\{(.*?)\}/g,a.template="",a.middleware=function(){}},{}],7:[function(t,e,n){!function(e,n,i){"use strict";function r(t){p.put(t),u()}function a(t){m.load(t,function(e,n){e&&l("failed to get JSON ("+t+")"),r(n)})}function o(){h.resultsContainer.innerHTML=""}function s(t){h.resultsContainer.innerHTML+=t}function u(){h.searchInput.addEventListener("keyup",function(t){o(),t.target.value.length>0&&c(p.search(t.target.value))})}function c(t){if(0===t.length)return s(h.noResultsText);for(var e=0;e<t.length;e++)s(f.compile(t[e]))}function l(t){throw new Error("SimpleJekyllSearch --- "+t)}var h={searchInput:null,resultsContainer:null,json:[],searchResultTemplate:'<a href="{post.link}"><h2 class="lecture-title-search">{title}</h2></a>',templateMiddleware:function(){},noResultsText:"<h2>Não foi possível encontrar :(</h2>",limit:10,fuzzy:!1,exclude:[]},d=["searchInput","resultsContainer","json"],f=t("./Templater"),p=t("./Repository"),m=t("./JSONLoader"),g=t("./OptionsValidator")({required:d}),v=t("./utils");e.SimpleJekyllSearch=function(t){var e=g.validate(t);e.length>0&&l("You must specify the following required options: "+d),h=v.merge(h,t),f.setOptions({template:h.searchResultTemplate,middleware:h.templateMiddleware}),p.setOptions({fuzzy:h.fuzzy,limit:h.limit}),v.isJSON(h.json)?r(h.json):a(h.json)},e.SimpleJekyllSearch.init=e.SimpleJekyllSearch}(window,document)},{"./JSONLoader":1,"./OptionsValidator":2,"./Repository":3,"./Templater":6,"./utils":8}],8:[function(t,e,n){"use strict";function i(t,e){var n={};for(var i in t)n[i]=t[i],void 0!==e[i]&&(n[i]=e[i]);return n}function r(t){try{return t instanceof Object&&JSON.parse(JSON.stringify(t))?!0:!1}catch(e){return!1}}e.exports={merge:i,isJSON:r}},{}]},{},[7]);